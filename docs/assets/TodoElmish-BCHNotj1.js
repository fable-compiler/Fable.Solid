import{R as se,p as Cn,q as En,r as je,$ as W,v as Le,w as ge,x as Tn,c as xn,y as en,z as $n,A as me,B as ve,D as w,m as fe,l as In,G as An,H as On,J as le,o as Ge,U as nn,K as Pe,L as z,M as V,N as he,O as Ve,P as Be,Q as Mn,S as Se,t as mn,a as P,i as pe,F as vn,f as Pn,g as q,T as tn,s as Rn,V as kn,W as we,X as Fn,d as ye,Y as sn,Z as Dn,_ as Nn,e as jn,a0 as Ln}from"./index-CiwxCZNk.js";import{e as N,a as ce,F as Gn,f as Vn,b as Bn,s as be,c as x,h,t as b,d as D,o as $,g as Ce,j as Hn,k as Wn,m as qn,p as Un,l as Kn,n as zn,q as Zn,r as Jn,u as ee,v as re,w as Xn}from"./List-biTribfy.js";import{m as ie,i as rn,d as H,u as Yn,a as ue,t as Qn,c as et,s as Ee,b as nt,e as tt}from"./Seq-Dz-viUTL.js";import{S as st}from"./Solid-XlombXI0.js";class rt{constructor(n,t,r,i,s,o,c){this.fullname=n,this.generics=t,this.construct=r,this.parent=i,this.fields=s,this.cases=o,this.enumCases=c}toString(){return $e(this)}GetHashCode(){return on(this)}Equals(n){return xe(this,n)}}function Te(e){return e.generics!=null?e.generics:[]}function on(e){const n=Cn(e.fullname),t=Te(e).map(on);return En([n,...t])}function xe(e,n){return e.fullname===""?n.fullname===""&&je(He(e),He(n),([t,r],[i,s])=>t===i&&xe(r,s)):e.fullname===n.fullname&&je(Te(e),Te(n),xe)}function $e(e){const n=it(e);return n!=null?$e(n)+"[]":e.generics==null||e.generics.length===0?e.fullname:e.fullname+"["+e.generics.map(t=>$e(t)).join(",")+"]"}function it(e){var n;return e.fullname==="[]"&&((n=e.generics)==null?void 0:n.length)===1?e.generics[0]:void 0}function He(e){if(e.fields!=null)return e.fields();throw new Error(`${e.fullname} is not an F# record type`)}function ot(e){return e instanceof rt?e.fields!=null:e instanceof se}const Ie=Symbol("store-raw"),Z=Symbol("store-node"),F=Symbol("store-has"),ln=Symbol("store-self");function cn(e){let n=e[W];if(!n&&(Object.defineProperty(e,W,{value:n=new Proxy(e,ut)}),!Array.isArray(e))){const t=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=t.length;i<s;i++){const o=t[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(n)})}}return n}function j(e){let n;return e!=null&&typeof e=="object"&&(e[W]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function Y(e,n=new Set){let t,r,i,s;if(t=e!=null&&e[Ie])return t;if(!j(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let o=0,c=e.length;o<c;o++)i=e[o],(r=Y(i,n))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const o=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let a=0,u=o.length;a<u;a++)s=o[a],!c[s].get&&(i=e[s],(r=Y(i,n))!==i&&(e[s]=r))}return e}function ae(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function te(e,n,t){if(e[n])return e[n];const[r,i]=xn(t,{equals:!1,internal:!0});return r.$=i,e[n]=r}function lt(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===W||n===Z||(delete t.value,delete t.writable,t.get=()=>e[W][n]),t}function un(e){ge()&&te(ae(e,Z),ln)()}function ct(e){return un(e),Reflect.ownKeys(e)}const ut={get(e,n,t){if(n===Ie)return e;if(n===W)return t;if(n===Le)return un(e),t;const r=ae(e,Z),i=r[n];let s=i?i():e[n];if(n===Z||n===F||n==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(e,n);ge()&&(typeof s!="function"||e.hasOwnProperty(n))&&!(o&&o.get)&&(s=te(r,n,s)())}return j(s)?cn(s):s},has(e,n){return n===Ie||n===W||n===Le||n===Z||n===F||n==="__proto__"?!0:(ge()&&te(ae(e,F),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ct,getOwnPropertyDescriptor:lt};function m(e,n,t,r=!1){if(!r&&e[n]===t)return;const i=e[n],s=e.length;t===void 0?(delete e[n],e[F]&&e[F][n]&&i!==void 0&&e[F][n].$()):(e[n]=t,e[F]&&e[F][n]&&i===void 0&&e[F][n].$());let o=ae(e,Z),c;if((c=te(o,n,i))&&c.$(()=>t),Array.isArray(e)&&e.length!==s){for(let a=e.length;a<s;a++)(c=o[a])&&c.$();(c=te(o,"length",s))&&c.$(e.length)}(c=o[ln])&&c.$()}function an(e,n){const t=Object.keys(n);for(let r=0;r<t.length;r+=1){const i=t[r];m(e,i,n[i])}}function at(e,n){if(typeof n=="function"&&(n=n(e)),n=Y(n),Array.isArray(n)){if(e===n)return;let t=0,r=n.length;for(;t<r;t++){const i=n[t];e[t]!==i&&m(e,t,i)}m(e,"length",r)}else an(e,n)}function ne(e,n,t=[]){let r,i=e;if(n.length>1){r=n.shift();const o=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let a=0;a<r.length;a++)ne(e,[r[a]].concat(n),t);return}else if(c&&o==="function"){for(let a=0;a<e.length;a++)r(e[a],a)&&ne(e,[a].concat(n),t);return}else if(c&&o==="object"){const{from:a=0,to:u=e.length-1,by:l=1}=r;for(let f=a;f<=u;f+=l)ne(e,[f].concat(n),t);return}else if(n.length>1){ne(e[r],n,[r].concat(t));return}i=e[r],t=[r].concat(t)}let s=n[0];typeof s=="function"&&(s=s(i,t),s===i)||r===void 0&&s==null||(s=Y(s),r===void 0||j(i)&&j(s)&&!Array.isArray(s)?an(i,s):m(e,r,s))}function ft(...[e,n]){const t=Y(e||{}),r=Array.isArray(t),i=cn(t);function s(...o){Tn(()=>{r&&o.length===1?at(t,o[0]):ne(t,o)})}return[i,s]}const Ae=Symbol("store-root");function U(e,n,t,r,i){const s=n[t];if(e===s)return;const o=Array.isArray(e);if(t!==Ae&&(!j(e)||!j(s)||o!==Array.isArray(s)||i&&e[i]!==s[i])){m(n,t,e);return}if(o){if(e.length&&s.length&&(!r||i&&e[0]&&e[0][i]!=null)){let u,l,f,g,_,S,E,p;for(f=0,g=Math.min(s.length,e.length);f<g&&(s[f]===e[f]||i&&s[f]&&e[f]&&s[f][i]===e[f][i]);f++)U(e[f],s,f,r,i);const A=new Array(e.length),I=new Map;for(g=s.length-1,_=e.length-1;g>=f&&_>=f&&(s[g]===e[_]||i&&s[f]&&e[f]&&s[g][i]===e[_][i]);g--,_--)A[_]=s[g];if(f>_||f>g){for(l=f;l<=_;l++)m(s,l,e[l]);for(;l<e.length;l++)m(s,l,A[l]),U(e[l],s,l,r,i);s.length>e.length&&m(s,"length",e.length);return}for(E=new Array(_+1),l=_;l>=f;l--)S=e[l],p=i&&S?S[i]:S,u=I.get(p),E[l]=u===void 0?-1:u,I.set(p,l);for(u=f;u<=g;u++)S=s[u],p=i&&S?S[i]:S,l=I.get(p),l!==void 0&&l!==-1&&(A[l]=s[u],l=E[l],I.set(p,l));for(l=f;l<e.length;l++)l in A?(m(s,l,A[l]),U(e[l],s,l,r,i)):m(s,l,e[l])}else for(let u=0,l=e.length;u<l;u++)U(e[u],s,u,r,i);s.length>e.length&&m(s,"length",e.length);return}const c=Object.keys(e);for(let u=0,l=c.length;u<l;u++)U(e[c[u]],s,c[u],r,i);const a=Object.keys(s);for(let u=0,l=a.length;u<l;u++)e[a[u]]===void 0&&m(s,a[u],void 0)}function dt(e,n={}){const{merge:t,key:r="id"}=n,i=Y(e);return s=>{if(!j(s)||!j(i))return i;const o=U(i,{[Ae]:s},Ae,t,r);return o===void 0?s:o}}function ht(){let e="";for(let n=0;n++<36;)e+=n*51&52?(n^15?8^Math.random()*(n^20?16:4):4).toString(16):"-";return e}function St(e,n){console.error(en(e),n)}function We(e,n,t){ce(r=>{try{r(n)}catch(i){e(i)}},t)}function L(){return N()}class fn{constructor(n){this.k=n}}function O(e){return new fn(e)}function d(e){return e.k}class y extends fn{constructor(n,t,r,i){super(n),this.left=t,this.right=r,this.h=i|0}}function M(e,n,t,r){return new y(e,n,t,r)}function T(e){return e.left}function C(e){return e.right}function K(e){return e.h}function dn(e,n){e:for(;;){const t=e,r=n;if(t!=null){const i=w(t);if(i instanceof y){const s=i;e=T(s),n=dn(C(s),r+1);continue e}else return r+1|0}else return r|0}}function wt(e){return dn(e,0)}function v(e,n,t){let r,i,s;const o=e;if(o!=null){const l=w(o);s=l instanceof y?(r=l,K(r)):1}else s=0;let c;const a=t;if(a!=null){const l=w(a);c=l instanceof y?(i=l,K(i)):1}else c=0;const u=(s<c?c:s)|0;return u===0?O(n):M(n,e,t,u+1)}function qe(e,n,t){let r,i,s,o,c,a,u,l,f;const g=e;if(g!=null){const E=w(g);f=E instanceof y?(r=E,K(r)):1}else f=0;let _;const S=t;if(S!=null){const E=w(S);_=E instanceof y?(i=E,K(i)):1}else _=0;if(_>f+2){const E=w(t);if(E instanceof y){const p=E;if(s=T(p),(s!=null?(o=w(s),o instanceof y?(c=o,K(c)):1):0)>f+1){const A=w(T(p));if(A instanceof y){const I=A;return v(v(e,n,T(I)),d(I),v(C(I),d(p),C(p)))}else throw new Error("internal error: Set.rebalance")}else return v(v(e,n,T(p)),d(p),C(p))}else throw new Error("internal error: Set.rebalance")}else if(f>_+2){const E=w(e);if(E instanceof y){const p=E;if(a=C(p),(a!=null?(u=w(a),u instanceof y?(l=u,K(l)):1):0)>_+1){const A=w(C(p));if(A instanceof y){const I=A;return v(v(T(p),d(p),T(I)),d(I),v(C(I),n,t))}else throw new Error("internal error: Set.rebalance")}else return v(T(p),d(p),v(C(p),n,t))}else throw new Error("internal error: Set.rebalance")}else return v(e,n,t)}function Q(e,n,t){if(t!=null){const r=w(t),i=e.Compare(n,d(r))|0;if(r instanceof y){const s=r;return i<0?qe(Q(e,n,T(s)),d(s),C(s)):i===0?t:qe(T(s),d(s),Q(e,n,C(s)))}else{const s=e.Compare(n,d(r))|0;return s<0?M(n,void 0,t,2):s===0?t:M(n,t,void 0,2)}}else return O(n)}function hn(e,n,t){e:for(;;){const r=e,i=n,s=t;if(s!=null){const o=w(s),c=r.Compare(i,d(o))|0;if(o instanceof y){const a=o;if(c<0){e=r,n=i,t=T(a);continue e}else{if(c===0)return!0;e=r,n=i,t=C(a);continue e}}else return c===0}else return!1}}function Sn(e,n){e:for(;;){const t=e,r=n;if(r!=null){const i=w(r);if(i instanceof y){const s=i;Sn(t,T(s)),t(d(s)),e=t,n=C(s);continue e}else t(d(i))}break}}class _t extends se{constructor(n,t){super(),this.stack=n,this.started=t}}function wn(e){e:for(;;){const n=e;if(x(n))return N();{const t=h(n),r=b(n);if(t!=null){const i=w(t);if(i instanceof y){const s=i;e=$([T(s),O(d(s)),C(s)],r);continue e}else return n}else{e=r;continue e}}}}function Ue(e){return new _t(wn(be(e)),!1)}function gt(){throw new Error("Enumeration not started")}function pt(){throw new Error("Enumeration already started")}function Ke(e){if(e.started){const n=e.stack;if(x(n))return pt();if(h(n)!=null){const t=w(h(n));return d(t)}else throw new Error("Please report error: Set iterator, unexpected stack for current")}else return gt()}function yt(e){if(e.started){const n=e.stack;if(x(n))return!1;if(h(n)!=null){if(w(h(n))instanceof y)throw new Error("Please report error: Set iterator, unexpected stack for moveNext");return e.stack=wn(b(n)),!x(e.stack)}else throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}else return e.started=!0,!x(e.stack)}function ze(e){let n=Ue(e);return{"System.Collections.Generic.IEnumerator`1.get_Current"(){return Ke(n)},"System.Collections.IEnumerator.get_Current"(){return Ke(n)},"System.Collections.IEnumerator.MoveNext"(){return yt(n)},"System.Collections.IEnumerator.Reset"(){n=Ue(e)},Dispose(){}}}function bt(e,n,t){e:for(;;){const r=e,i=n,s=t;if(x(i))return x(s)?0:-1;if(x(s))return 1;if(h(s)!=null)if(h(i)!=null){const o=w(h(i)),c=w(h(s));if(o instanceof y){const a=o;if(T(a)==null)if(c instanceof y){const u=c;if(T(u)==null){const l=r.Compare(d(a),d(u))|0;if(l!==0)return l|0;e=r,n=D(C(a),b(i)),t=D(C(u),b(s));continue e}else{let l,f,g,_,S;switch(x(i)?x(s)?l=2:h(s)!=null?(l=1,_=b(s),S=w(h(s))):l=2:h(i)!=null?(l=0,f=b(i),g=w(h(i))):x(s)?l=2:h(s)!=null?(l=1,_=b(s),S=w(h(s))):l=2,l){case 0:if(g instanceof y){const E=g;e=r,n=$([T(E),M(d(E),void 0,C(E),0)],f),t=s;continue e}else{e=r,n=$([void 0,O(d(g))],f),t=s;continue e}case 1:if(S instanceof y){const E=S;e=r,n=i,t=$([T(E),M(d(E),void 0,C(E),0)],_);continue e}else{e=r,n=i,t=$([void 0,O(d(S))],_);continue e}default:throw new Error("unexpected state in SetTree.compareStacks")}}}else{const u=r.Compare(d(a),d(c))|0;if(u!==0)return u|0;e=r,n=D(C(a),b(i)),t=D(void 0,b(s));continue e}else{let u,l,f,g,_;switch(x(i)?x(s)?u=2:h(s)!=null?(u=1,g=b(s),_=w(h(s))):u=2:h(i)!=null?(u=0,l=b(i),f=w(h(i))):x(s)?u=2:h(s)!=null?(u=1,g=b(s),_=w(h(s))):u=2,u){case 0:if(f instanceof y){const S=f;e=r,n=$([T(S),M(d(S),void 0,C(S),0)],l),t=s;continue e}else{e=r,n=$([void 0,O(d(f))],l),t=s;continue e}case 1:if(_ instanceof y){const S=_;e=r,n=i,t=$([T(S),M(d(S),void 0,C(S),0)],g);continue e}else{e=r,n=i,t=$([void 0,O(d(_))],g);continue e}default:throw new Error("unexpected state in SetTree.compareStacks")}}}else if(c instanceof y){const a=c;if(T(a)==null){const u=r.Compare(d(o),d(a))|0;if(u!==0)return u|0;e=r,n=D(void 0,b(i)),t=D(C(a),b(s));continue e}else{let u,l,f,g,_;switch(x(i)?x(s)?u=2:h(s)!=null?(u=1,g=b(s),_=w(h(s))):u=2:h(i)!=null?(u=0,l=b(i),f=w(h(i))):x(s)?u=2:h(s)!=null?(u=1,g=b(s),_=w(h(s))):u=2,u){case 0:if(f instanceof y){const S=f;e=r,n=$([T(S),M(d(S),void 0,C(S),0)],l),t=s;continue e}else{e=r,n=$([void 0,O(d(f))],l),t=s;continue e}case 1:if(_ instanceof y){const S=_;e=r,n=i,t=$([T(S),M(d(S),void 0,C(S),0)],g);continue e}else{e=r,n=i,t=$([void 0,O(d(_))],g);continue e}default:throw new Error("unexpected state in SetTree.compareStacks")}}}else{const a=r.Compare(d(o),d(c))|0;if(a!==0)return a|0;e=r,n=b(i),t=b(s);continue e}}else{w(h(s));let o,c,a,u,l;switch(x(i)?x(s)?o=2:h(s)!=null?(o=1,u=b(s),l=w(h(s))):o=2:h(i)!=null?(o=0,c=b(i),a=w(h(i))):x(s)?o=2:h(s)!=null?(o=1,u=b(s),l=w(h(s))):o=2,o){case 0:if(a instanceof y){const f=a;e=r,n=$([T(f),M(d(f),void 0,C(f),0)],c),t=s;continue e}else{e=r,n=$([void 0,O(d(a))],c),t=s;continue e}case 1:if(l instanceof y){const f=l;e=r,n=i,t=$([T(f),M(d(f),void 0,C(f),0)],u);continue e}else{e=r,n=i,t=$([void 0,O(d(l))],u);continue e}default:throw new Error("unexpected state in SetTree.compareStacks")}}else if(h(i)!=null){w(h(i));let o,c,a,u,l;switch(x(i)?x(s)?o=2:h(s)!=null?(o=1,u=b(s),l=w(h(s))):o=2:h(i)!=null?(o=0,c=b(i),a=w(h(i))):x(s)?o=2:h(s)!=null?(o=1,u=b(s),l=w(h(s))):o=2,o){case 0:if(a instanceof y){const f=a;e=r,n=$([T(f),M(d(f),void 0,C(f),0)],c),t=s;continue e}else{e=r,n=$([void 0,O(d(a))],c),t=s;continue e}case 1:if(l instanceof y){const f=l;e=r,n=i,t=$([T(f),M(d(f),void 0,C(f),0)],u);continue e}else{e=r,n=i,t=$([void 0,O(d(l))],u);continue e}default:throw new Error("unexpected state in SetTree.compareStacks")}}else{e=r,n=b(i),t=b(s);continue e}}}function Ze(e,n,t){return n==null?t==null?0:-1:t==null?1:bt(e,be(n),be(t))|0}function Ct(e,n,t){let r=t;Sn(i=>{Ce(n,r,i),r=r+1|0},e)}function Et(e,n,t){e:for(;;){const r=e,i=n,s=t;if(s["System.Collections.IEnumerator.MoveNext"]()){e=r,n=Q(r,s["System.Collections.Generic.IEnumerator`1.get_Current"](),i),t=s;continue e}else return i}}function Tt(e,n){return Vn((t,r)=>Q(e,r,t),void 0,n)}function xt(e,n){return Bn((t,r)=>Q(e,r,t),void 0,n)}function $t(e,n){if($n(n))return Tt(e,n);if(n instanceof Gn)return xt(e,n);{const t=me(n);try{return Et(e,void 0,t)}finally{ve(t)}}}class Re{constructor(n,t){this.comparer=n,this.tree=t}GetHashCode(){return Ot(this)|0}Equals(n){let t;const r=this;return n instanceof Re&&(t=n,Ze(J(r),R(r),R(t))===0)}toString(){return"set ["+fe("; ",ie(t=>In(t),this))+"]"}get[Symbol.toStringTag](){return"FSharpSet"}toJSON(){const n=this;return Array.from(n)}CompareTo(n){const t=this;return Ze(J(t),R(t),R(n))|0}"System.Collections.Generic.ICollection`1.Add2B595"(n){throw new Error("ReadOnlyCollection")}"System.Collections.Generic.ICollection`1.Clear"(){throw new Error("ReadOnlyCollection")}"System.Collections.Generic.ICollection`1.Remove2B595"(n){throw new Error("ReadOnlyCollection")}"System.Collections.Generic.ICollection`1.Contains2B595"(n){const t=this;return hn(J(t),n,R(t))}"System.Collections.Generic.ICollection`1.CopyToZ3B4C077E"(n,t){Ct(R(this),n,t)}"System.Collections.Generic.ICollection`1.get_IsReadOnly"(){return!0}"System.Collections.Generic.ICollection`1.get_Count"(){return _e(this)|0}"System.Collections.Generic.IReadOnlyCollection`1.get_Count"(){return _e(this)|0}GetEnumerator(){return ze(R(this))}[Symbol.iterator](){return An(me(this))}"System.Collections.IEnumerable.GetEnumerator"(){return ze(R(this))}get size(){return _e(this)|0}add(n){throw new Error("Set cannot be mutated")}clear(){throw new Error("Set cannot be mutated")}delete(n){throw new Error("Set cannot be mutated")}has(n){return _n(this,n)}keys(){return ie(t=>t,this)}values(){return ie(t=>t,this)}entries(){return ie(t=>[t,t],this)}forEach(n,t){const r=this;rn(i=>{n(i,i,r)},r)}}function ke(e,n){return new Re(e,n)}function J(e){return e.comparer}function R(e){return e.tree}function It(e){return ke(e,void 0)}function At(e,n){return ke(J(e),Q(J(e),n,R(e)))}function _e(e){return wt(R(e))}function _n(e,n){return hn(J(e),n,R(e))}function Ot(e){let n=0;const t=me(e);try{for(;t["System.Collections.IEnumerator.MoveNext"]();){const r=t["System.Collections.Generic.IEnumerator`1.get_Current"]();n=(n<<1)+On(r)+631|0}}finally{ve(t)}return Math.abs(n)|0}function Oe(e,n){return _n(n,e)}function Mt(e,n){return At(n,e)}function mt(e){return It(e)}function vt(e,n){return ke(n,$t(n,e))}function Pt(){return N()}function Fe(e){return fe("/",e)}function Rt(e,n){const t=new Error("Duplicate SubId");return e(["Duplicate SubId: "+Fe(n),t])}function gn(e,n,t){try{ve(t)}catch(r){e(["Error stopping subscription: "+Fe(n),r])}}function kt(e,n,t,r){try{return[t,r(n)]}catch(i){e(["Error starting subscription: "+Fe(t),i]);return}}function Ft(e,n){ce(t=>{gn(e,t[0],t[1])},n)}function Je(e,n,t,r,i,s){return ce(o=>{Rt(e,o)},t),ce(o=>{gn(e,o[0],o[1])},r),Hn(i,Wn(o=>kt(e,n,o[0],o[1]),s))}function Dt(){return[N(),mt({Compare:le}),N()]}function Nt(e,n,t,r,i){return Oe(e,r)?[D(e,t),r,i]:[t,Mt(e,r),D([e,n],i)]}function jt(e){return zn((n,t)=>Nt(n[0],n[1],t[0],t[1],t[2]),e,Dt())}const Lt=N();function Xe(e,n){const t=vt(qn(o=>o[0],e),{Compare:le}),r=jt(n),i=r[1],s=r[0];if(t.Equals(i))return[s,N(),e,N()];{const o=Un(c=>Oe(c[0],i),e);return[s,o[1],o[0],Kn(c=>!Oe(c[0],t),r[2])]}}function Gt(e,n,t,r){const i=le(e,t)|0;if(i===0)throw new Error("The step of a range cannot be zero");const s=i>0;return o=>{const c=le(o,n)|0;return s&&c<=0||!s&&c>=0?[o,r(o,e)]:void 0}}function Vt(e,n,t,r,i){const s=Gt(n,t,r,i);return H(()=>Yn(s,e))}function Bt(e,n,t){return Vt(e,n,t,0,(r,i)=>r+i)}class X extends nn{constructor(n,t){super(),this.tag=n,this.fields=t}cases(){return["Writable","ReadWritable"]}}class Ht{constructor(n){this.state=new X(0,[Zn(new Array(Ge(n,10)),0,Ge(n,10),null),0])}}function Wt(e){return new Ht(e)}function Ye(e){const n=e.state;if(n.tag===1){const t=n.fields[1]|0,r=n.fields[2]|0,i=n.fields[0],s=(r+1)%i.length|0;return s===t?e.state=new X(0,[i,t]):e.state=new X(1,[i,t,s]),en(Jn(r,i))}else return}function qt(e,n){const t=e.state;if(t.tag===1){const r=t.fields[1]|0,i=t.fields[2]|0,s=t.fields[0];Ce(s,r,n);const o=(r+1)%s.length|0;o===i?e.state=new X(1,[Ut(e,i,s),s.length,0]):e.state=new X(1,[s,o,i])}else{const r=t.fields[1]|0,i=t.fields[0];Ce(i,r,n);const s=(r+1)%i.length|0;e.state=new X(1,[i,s,r])}}function Ut(e,n,t){return Array.from(H(()=>ue(nt(n,t),H(()=>ue(Qn(n,t),H(()=>et(r=>Ee(Pe()),Bt(0,1,t.length))))))))}class De extends se{constructor(n,t,r,i,s,o,c){super(),this.init=n,this.update=t,this.subscribe=r,this.view=i,this.setState=s,this.onError=o,this.termination=c}}function Kt(e,n,t){return new De(e,n,r=>Pt(),t,z(r=>{const i=V(t)(r);return s=>{i(s)}}),r=>{St(r[0],r[1])},[r=>!1,r=>{}])}function zt(e,n){return new De(n.init,n.update,n.subscribe,n.view,e,n.onError,n.termination)}function Zt(e){return e.init}function Jt(e,n,t,r,i,s,o){const c=V(e)(o.init),a=he(n)(V(o.update)),u=he(t)(V(o.view)),l=he(r)(V(o.setState));return new De(c,z(a),V(i)(o.subscribe),z(u),z(l),o.onError,s(o.termination))}function Xt(e,n,t){let r;const i=t.init(n),s=i[0],o=t.subscribe(s),c=t.termination,a=Wt(10);let u=!1,l=s,f=Lt,g=!1;const _=p=>{g||(qt(a,p),u||(u=!0,E(),u=!1))},S=V(e)(_),E=()=>{let p,A=Ye(a);for(;!g&&A!=null;){const I=w(A);if(c[0](I))Ft(t.onError,f),c[1](l),g=!0;else{const Ne=t.update(I,l),de=Ne[0],yn=t.subscribe(de);t.setState(de,S),f=(p=Xe(f,yn),Je(t.onError,S,p[0],p[1],p[2],p[3])),We(bn=>{t.onError([Ve(Be("Error handling the message: %A"))(I),bn])},S,Ne[1]),l=de,A=Ye(a)}}};u=!0,t.setState(s,S),f=(r=Xe(f,o),Je(t.onError,S,r[0],r[1],r[2],r[3])),We(p=>{t.onError([Ve(Be("Error intitializing:")),p])},S,i[1]),E(),u=!1}function Yt(e,n){Xt(z(t=>t),e,n)}function Qt(e){Yt(void 0,e)}function es(e){return e!=null&&typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype}function Qe(e){const n=t=>{if(Array.isArray(t))return ee(n,t);if(ot(t)||es(t)){const r={};return rn(i=>{r[i]=n(t[i])},Object.keys(t)),r}else return t};return n(e)}function ns(e){let n=!1,t=Pe();const r=Zt(e)();let i=r[0],s=r[1];const o=ft(Qe(i));return Mn(()=>{n=!0}),Qt(zt((c,a)=>{if(t=a,i!==c){i=c;const u=dt(Qe(c),{});o[1](u)}},Jt((c,a)=>[i,s],Se(c=>c),Se(c=>c),Se(c=>c),z(c=>c),c=>[a=>c[0](a)?!0:n,a=>{c[1](a)}],e))),[o[0],t]}var ts=q('<div class="field has-addons"><div class="control is-expanded"><input class="input is-medium"></div><div class=control><button class="button is-primary is-medium"><i class="fa fa-plus">'),ss=q("<button type=button><i>"),rs=q("<input>"),is=q("<li class=box>"),os=q("<p class=subtitle>"),ls=q("<p class=title>To-Do List"),cs=q("<ul>");mn("Loading TodoElmish.fs...");class B extends se{constructor(n,t,r,i){super(),this.Id=n,this.Description=t,this.Editing=r,this.Completed=i}}class G extends se{constructor(n){super(),this.Todos=n}}class k extends nn{constructor(n,t){super(),this.tag=n,this.fields=t}cases(){return["AddNewTodo","DeleteTodo","ToggleCompleted","CancelEdit","ApplyEdit","StartEditingTodo"]}}function Me(e){return new B(ht(),e,void 0,!1)}function us(){let e;return[Me("Learn F#"),(e=Me("Learn Elmish"),new B(e.Id,e.Description,e.Editing,!0))]}function as(){return[new G(us()),L()]}function fs(e,n){switch(e.tag){case 1:return[new G(n.Todos.filter(t=>t.Id!==e.fields[0])),L()];case 2:return[new G(ee(t=>t.Id===e.fields[0]?new B(t.Id,t.Description,t.Editing,!t.Completed):t,n.Todos)),L()];case 5:return[new G(ee(t=>t.Id===e.fields[0]?new B(t.Id,t.Description,t.Description,t.Completed):t.Editing!=null?new B(t.Id,t.Description,void 0,t.Completed):t,n.Todos)),L()];case 3:return[new G(ee(t=>t.Editing!=null?new B(t.Id,t.Description,void 0,t.Completed):t,n.Todos)),L()];case 4:return[new G(ee(t=>t.Editing==null?t:new B(t.Id,e.fields[0],void 0,t.Completed),n.Todos)),L()];default:{const t=e.fields[0];return[new G(Dn(t)?n.Todos:Xn([Me(t)],n.Todos)),L()]}}}function pn(e,n,t){const r=t.target;switch(t.key){case"Enter":{e(r.value),r.value="";break}case"Escape":{n(),r.value="",r.blur();break}}}function ds(e){let n=Pe();return(()=>{var t=ts(),r=t.firstChild,i=r.firstChild,s=r.nextSibling,o=s.firstChild;return i.$$keyup=c=>{pn(a=>{e.dispatch(new k(0,[a]))},()=>{},c)},tn(c=>{n=c},i),Rn(i,"autofocus",!0),o.$$click=c=>{const a=n.value;n.value="",e.dispatch(new k(0,[a]))},t})()}function oe(e){return(()=>{var n=ss(),t=n.firstChild;return n.$$mousedown=r=>{r.preventDefault()},n.$$click=r=>{e.dispatch()},ye(r=>{var i=Nn(tt(H(()=>ue(Ee(["button",!0]),H(()=>ue(Ee(["is-invisible",!e.isVisible()]),H(()=>e.classes))))))),s=jn(4)+"px",o=fe(" ",e.iconClasses);return r.e=Ln(n,i,r.e),s!==r.t&&((r.t=s)!=null?n.style.setProperty("margin-right",s):n.style.removeProperty("margin-right")),o!==r.a&&sn(t,r.a=o),r},{e:void 0,t:void 0,a:void 0}),n})()}function hs(e){const n=st(),t=()=>e.todo.Editing!=null,r=()=>e.todo.Editing==null;return kn(()=>{t()&&(n.contents.select(),n.contents.focus())}),(()=>{var i=is();return pe(i,P(we,{classes:["columns"],get children(){return[P(we,{classes:["column","is-7"],get children(){return P(Fn,{get when(){return e.todo.Editing},get fallback(){return(()=>{var s=os();return s.$$dblclick=o=>{e.dispatch(new k(5,[e.todo.Id]))},s.style.setProperty("user-select","none"),s.style.setProperty("cursor","pointer"),pe(s,()=>e.todo.Description),s})()},get children(){var s=rs();return s.addEventListener("blur",o=>{e.dispatch(new k(3,[]))}),s.$$keyup=o=>{pn(c=>{e.dispatch(new k(4,[c]))},()=>{e.dispatch(new k(3,[]))},o)},tn(o=>{n.contents=o},s),ye(()=>sn(s,fe(" ",["input","is-medium"]))),ye(()=>s.value=w(e.todo.Editing)),s}})}}),P(we,{classes:["column","is-4"],get children(){return[P(oe,{isVisible:t,dispatch:()=>{e.dispatch(new k(4,[n.contents.value]))},classes:[["is-primary",!0]],get iconClasses(){return re(["fa","fa-save"])}}),P(oe,{isVisible:r,dispatch:()=>{e.dispatch(new k(2,[e.todo.Id]))},get classes(){return[["is-success",e.todo.Completed]]},get iconClasses(){return re(["fa","fa-check"])}}),P(oe,{isVisible:r,dispatch:()=>{e.dispatch(new k(5,[e.todo.Id]))},classes:[["is-primary",!0]],get iconClasses(){return re(["fa","fa-edit"])}}),P(oe,{isVisible:r,dispatch:()=>{e.dispatch(new k(1,[e.todo.Id]))},classes:[["is-danger",!0]],get iconClasses(){return re(["fa","fa-times"])}})]}})]}})),i})()}function ps(){const e=ns(Kt(as,fs,(t,r)=>{})),n=e[1];return[ls(),P(ds,{dispatch:n}),(()=>{var t=cs();return pe(t,P(vn,{get each(){return e[0].Todos},children:(r,i)=>P(hs,{todo:r,dispatch:n})})),t})()]}Pn(["keyup","click","mousedown","dblclick"]);export{ps as Components__Components_TodoElmish_Static};
